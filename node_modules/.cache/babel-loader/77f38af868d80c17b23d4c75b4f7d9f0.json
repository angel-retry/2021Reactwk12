{"ast":null,"code":"var _jsxFileName = \"F:\\\\NTUE\\\\109-2\\\\\\u9032\\u968E\\u524D\\u7AEF\\\\\\u7DF4\\u7FD2\\\\wk12\\\\src\\\\store\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { createContext } from \"react\";\nimport useReducerWithThunk from \"use-reducer-thunk\";\nimport { SET_PAGE_TITLE, SET_PAGE_CONTENT, SET_NAVBAR_ACTIVEITEM, ADD_CART_ITEM, REMOVE_CART_ITEM, SET_PRODUCT_DETAIL, BEGIN_PRODUCTS_FEED, SUCCESS_PRODUCTS_FEED, FAIL_PRODUCTS_FEED, BEGIN_PRODUCTS_REQUEST, SUCCESS_PRODUCTS_REQUEST, FAIL_PRODUCTS_REQUEST } from \"../utils/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StoreContext = /*#__PURE__*/createContext();\nlet cartItems = localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\nconst initialState = {\n  allProducts: [],\n  page: {\n    title: \"\",\n    products: []\n  },\n  productDetail: {\n    product: {},\n    qty: 1\n  },\n  navBar: {\n    activeItem: \"/\"\n  },\n  cartItems,\n  feedProducts: {\n    loading: false,\n    error: null\n  },\n  requestProducts: {\n    loading: false,\n    error: null\n  }\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case SET_PAGE_TITLE:\n      return { ...state,\n        page: { ...state.page,\n          title: action.payload\n        }\n      };\n\n    case SET_PAGE_CONTENT:\n      return { ...state,\n        page: { ...state.page,\n          ...action.payload\n        }\n      };\n\n    case SET_NAVBAR_ACTIVEITEM:\n      return { ...state,\n        navBar: {\n          activeItem: action.payload\n        }\n      };\n\n    case ADD_CART_ITEM:\n      const item = action.payload;\n      const product = state.cartItems.find(x => x.id === item.id);\n\n      if (product) {\n        cartItems = state.cartItems.map(x => x.id === product.id ? item : x);\n        return { ...state,\n          cartItems\n        };\n      }\n\n      cartItems = [...state.cartItems, item];\n      return { ...state,\n        cartItems\n      };\n\n    case REMOVE_CART_ITEM:\n      cartItems = state.cartItems.filter(x => x.id !== action.payload);\n      return { ...state,\n        cartItems\n      };\n\n    case SET_PRODUCT_DETAIL:\n      return { ...state,\n        productDetail: { ...state.productDetail,\n          ...action.payload\n        }\n      };\n\n    case BEGIN_PRODUCTS_REQUEST:\n      return { ...state,\n        requestProducts: { ...state.requestProducts,\n          loading: true\n        }\n      };\n\n    case SUCCESS_PRODUCTS_REQUEST:\n      return { ...state,\n        requestProducts: { ...state.requestProducts,\n          loading: false\n        }\n      };\n\n    case FAIL_PRODUCTS_REQUEST:\n      return { ...state,\n        requestProducts: { ...state.requestProducts,\n          loading: false,\n          error: action.payload\n        }\n      };\n\n    case BEGIN_PRODUCTS_FEED:\n      return { ...state,\n        feedProducts: { ...state.feedProducts,\n          loading: true\n        }\n      };\n\n    case SUCCESS_PRODUCTS_FEED:\n      return { ...state,\n        feedProducts: { ...state.feedProducts,\n          loading: false\n        }\n      };\n\n    case FAIL_PRODUCTS_FEED:\n      return { ...state,\n        feedProducts: { ...state.feedProducts,\n          loading: false,\n          error: action.payload\n        }\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport function StoreProvider(props) {\n  _s();\n\n  const [state, dispatch] = useReducerWithThunk(reducer, initialState, \"example\"); // const [state, dispatch] = useReducer(reducer, initialState)\n\n  const value = {\n    state,\n    dispatch\n  };\n  return /*#__PURE__*/_jsxDEV(StoreContext.Provider, {\n    value: value,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n\n_s(StoreProvider, \"P0eKCI6WtpOvzqf1JEHAprAawWs=\", false, function () {\n  return [useReducerWithThunk];\n});\n\n_c = StoreProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreProvider\");","map":{"version":3,"sources":["F:/NTUE/109-2/進階前端/練習/wk12/src/store/index.js"],"names":["createContext","useReducerWithThunk","SET_PAGE_TITLE","SET_PAGE_CONTENT","SET_NAVBAR_ACTIVEITEM","ADD_CART_ITEM","REMOVE_CART_ITEM","SET_PRODUCT_DETAIL","BEGIN_PRODUCTS_FEED","SUCCESS_PRODUCTS_FEED","FAIL_PRODUCTS_FEED","BEGIN_PRODUCTS_REQUEST","SUCCESS_PRODUCTS_REQUEST","FAIL_PRODUCTS_REQUEST","StoreContext","cartItems","localStorage","getItem","JSON","parse","initialState","allProducts","page","title","products","productDetail","product","qty","navBar","activeItem","feedProducts","loading","error","requestProducts","reducer","state","action","type","payload","item","find","x","id","map","filter","StoreProvider","props","dispatch","value","children"],"mappings":"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","sourcesContent":["import { createContext } from \"react\";\r\nimport useReducerWithThunk from \"use-reducer-thunk\";\r\nimport {\r\n  SET_PAGE_TITLE,\r\n  SET_PAGE_CONTENT,\r\n  SET_NAVBAR_ACTIVEITEM,\r\n  ADD_CART_ITEM,\r\n  REMOVE_CART_ITEM,\r\n  SET_PRODUCT_DETAIL,\r\n  BEGIN_PRODUCTS_FEED,\r\n  SUCCESS_PRODUCTS_FEED,\r\n  FAIL_PRODUCTS_FEED,\r\n  BEGIN_PRODUCTS_REQUEST,\r\n  SUCCESS_PRODUCTS_REQUEST,\r\n  FAIL_PRODUCTS_REQUEST,\r\n} from \"../utils/constants\";\r\n\r\nexport const StoreContext = createContext();\r\nlet cartItems = localStorage.getItem(\"cartItems\")\r\n  ? JSON.parse(localStorage.getItem(\"cartItems\"))\r\n  : [];\r\n\r\nconst initialState = {\r\n  allProducts: [],\r\n  page: {\r\n    title: \"\",\r\n    products: [],\r\n  },\r\n  productDetail: {\r\n    product: {},\r\n    qty: 1,\r\n  },\r\n  navBar: {\r\n    activeItem: \"/\",\r\n  },\r\n  cartItems,\r\n  feedProducts: {\r\n    loading: false,\r\n    error: null,\r\n  },\r\n  requestProducts: {\r\n    loading: false,\r\n    error: null,\r\n  }\r\n};\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case SET_PAGE_TITLE:\r\n      return {\r\n        ...state,\r\n        page: {\r\n          ...state.page,\r\n          title: action.payload\r\n        },\r\n      };\r\n    case SET_PAGE_CONTENT:\r\n      return {\r\n        ...state,\r\n        page: {\r\n          ...state.page,\r\n          ...action.payload\r\n        },\r\n      };\r\n    case SET_NAVBAR_ACTIVEITEM:\r\n      return {\r\n        ...state,\r\n        navBar: {\r\n          activeItem: action.payload,\r\n        },\r\n      };\r\n    case ADD_CART_ITEM:\r\n      const item = action.payload;\r\n      const product = state.cartItems.find((x) => x.id === item.id);\r\n      if (product) {\r\n        cartItems = state.cartItems.map((x) =>\r\n          x.id === product.id ? item : x\r\n        );\r\n        return { ...state, cartItems };\r\n      }\r\n      cartItems = [...state.cartItems, item];\r\n      return { ...state, cartItems };\r\n    case REMOVE_CART_ITEM:\r\n      cartItems = state.cartItems.filter((x) => x.id !== action.payload);\r\n      return { ...state, cartItems };\r\n    case SET_PRODUCT_DETAIL:\r\n      return { ...state, productDetail: { ...state.productDetail, ...action.payload} };\r\n    case BEGIN_PRODUCTS_REQUEST:\r\n      return { ...state, requestProducts: { ...state.requestProducts, loading: true } }\r\n    case SUCCESS_PRODUCTS_REQUEST:\r\n      return { ...state, requestProducts: { ...state.requestProducts, loading: false } }\r\n    case FAIL_PRODUCTS_REQUEST:\r\n      return { ...state, requestProducts: { ...state.requestProducts, loading: false, error: action.payload } }\r\n    case BEGIN_PRODUCTS_FEED:\r\n      return { ...state, feedProducts: { ...state.feedProducts, loading: true } }\r\n    case SUCCESS_PRODUCTS_FEED:\r\n      return { ...state, feedProducts: { ...state.feedProducts, loading: false } }\r\n    case FAIL_PRODUCTS_FEED:\r\n      return { ...state, feedProducts: { ...state.feedProducts, loading: false, error: action.payload } }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function StoreProvider(props) {\r\n  const [state, dispatch] = useReducerWithThunk(\r\n    reducer,\r\n    initialState,\r\n    \"example\"\r\n  );\r\n  // const [state, dispatch] = useReducer(reducer, initialState)\r\n  const value = { state, dispatch };\r\n\r\n  return (\r\n    <StoreContext.Provider value={value}>\r\n      {props.children}\r\n    </StoreContext.Provider>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}