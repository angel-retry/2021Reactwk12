{"ast":null,"code":"var _jsxFileName = \"F:\\\\NTUE\\\\109-2\\\\\\u9032\\u968E\\u524D\\u7AEF\\\\\\u4F5C\\u696D\\\\wk12\\\\src\\\\store\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { createContext } from \"react\";\nimport useReducerWithThunk from \"use-reducer-thunk\";\nimport { SET_PAGE_TITLE, SET_PAGE_CONTENT, SET_NAVBAR_ACTIVEITEM, ADD_CART_ITEM, REMOVE_CART_ITEM, EMPTY_CART, SAVE_SHIPPING_ADDRESS, SAVE_PAYMENT_METHOD, SET_PRODUCT_DETAIL, BEGIN_PRODUCTS_FEED, SUCCESS_PRODUCTS_FEED, FAIL_PRODUCTS_FEED, BEGIN_PRODUCTS_REQUEST, SUCCESS_PRODUCTS_REQUEST, FAIL_PRODUCTS_REQUEST, BEGIN_LOGIN_REQUEST, SUCCESS_LOGIN_REQUEST, FAIL_LOGIN_REQUEST, LOGOUT_REQUEST, REMEMBER_LOGIN, BEGIN_REGISTER_REQUEST, SUCCESS_REGISTER_REQUEST, FAIL_REGISTER_REQUEST, BEGIN_UPDATE_USERINFO, SUCCESS_UPDATE_USERINFO, FAIL_UPDATE_USERINFO, BEGIN_ORDER_CREATE, SUCCESS_ORDER_CREATE, FAIL_ORDER_CREATE, RESET_ORDER, BEGIN_ORDER_DETAIL, SUCCESS_ORDER_DETAIL, FAIL_ORDER_DETAIL } from \"../utils/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StoreContext = /*#__PURE__*/createContext();\nlet cartItems;\n\ntry {\n  cartItems = JSON.parse(localStorage.getItem(\"cartItems\"));\n  if (!cartItems) cartItems = [];\n} catch (e) {\n  cartItems = [];\n}\n\nlet shippingAddress;\n\ntry {\n  shippingAddress = JSON.parse(localStorage.getItem('shippingAddress'));\n} catch (e) {\n  shippingAddress = {};\n}\n\nlet userInfo;\n\ntry {\n  userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n} catch (e) {\n  userInfo = null;\n}\n\nlet orderInfo_order;\n\ntry {\n  orderInfo_order = JSON.parse(localStorage.getItem('orderInfo'));\n} catch (e) {\n  orderInfo_order = {\n    id: \"\"\n  };\n}\n\nconst initialState = {\n  allProducts: [],\n  page: {\n    title: \"\",\n    products: []\n  },\n  productDetail: {\n    product: {},\n    qty: 1\n  },\n  navBar: {\n    activeItem: \"/\"\n  },\n  cart: {\n    cartItems,\n    shippingAddress,\n    paymentMethod: 'Google'\n  },\n  orderInfo: {\n    loading: false,\n    order: orderInfo_order,\n    success: false,\n    error: null\n  },\n  orderDetail: {\n    loading: true,\n    order: {\n      cartItems: []\n    },\n    error: null\n  },\n  feedProducts: {\n    loading: false,\n    error: null\n  },\n  requestProducts: {\n    loading: false,\n    error: null\n  },\n  userSignin: {\n    loading: false,\n    userInfo,\n    remember: true,\n    error: \"\"\n  },\n  userRegister: {\n    loading: false,\n    userInfo: null,\n    error: \"\"\n  }\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case SET_PAGE_TITLE:\n      return { ...state,\n        page: { ...state.page,\n          title: action.payload\n        }\n      };\n\n    case SET_PAGE_CONTENT:\n      return { ...state,\n        page: { ...state.page,\n          ...action.payload\n        }\n      };\n\n    case SET_NAVBAR_ACTIVEITEM:\n      return { ...state,\n        navBar: {\n          activeItem: action.payload\n        }\n      };\n\n    case ADD_CART_ITEM:\n      const item = action.payload;\n      const product = state.cart.cartItems.find(x => x.id === item.id);\n\n      if (product) {\n        cartItems = state.cart.cartItems.map(x => x.id === product.id ? item : x);\n        return { ...state,\n          cart: { ...state.cart,\n            cartItems\n          }\n        };\n      }\n\n      cartItems = [...state.cart.cartItems, item];\n      return { ...state,\n        cart: { ...state.cart,\n          cartItems\n        }\n      };\n\n    case REMOVE_CART_ITEM:\n      cartItems = state.cart.cartItems.filter(x => x.id !== action.payload);\n      return { ...state,\n        cart: { ...state.cart,\n          cartItems\n        }\n      };\n\n    case EMPTY_CART:\n      cartItems = [];\n      return { ...state,\n        cart: { ...state.cart,\n          cartItems\n        }\n      };\n\n    case SAVE_SHIPPING_ADDRESS:\n      console.log('action.payload.shippingAddress = ');\n      console.log(action.payload);\n      return { ...state,\n        cart: { ...state.cart,\n          shippingAddress: action.payload\n        }\n      };\n\n    case SAVE_PAYMENT_METHOD:\n      return { ...state,\n        cart: { ...state.cart,\n          paymentMethod: action.payload\n        }\n      };\n\n    case SET_PRODUCT_DETAIL:\n      return { ...state,\n        productDetail: { ...state.productDetail,\n          ...action.payload\n        }\n      };\n\n    case BEGIN_PRODUCTS_REQUEST:\n      return { ...state,\n        requestProducts: { ...state.requestProducts,\n          loading: true\n        }\n      };\n\n    case SUCCESS_PRODUCTS_REQUEST:\n      return { ...state,\n        requestProducts: { ...state.requestProducts,\n          loading: false\n        }\n      };\n\n    case FAIL_PRODUCTS_REQUEST:\n      return { ...state,\n        requestProducts: { ...state.requestProducts,\n          loading: false,\n          error: action.payload\n        }\n      };\n\n    case BEGIN_PRODUCTS_FEED:\n      return { ...state,\n        feedProducts: { ...state.feedProducts,\n          loading: true\n        }\n      };\n\n    case SUCCESS_PRODUCTS_FEED:\n      return { ...state,\n        feedProducts: { ...state.feedProducts,\n          loading: false\n        }\n      };\n\n    case FAIL_PRODUCTS_FEED:\n      return { ...state,\n        feedProducts: { ...state.feedProducts,\n          loading: false,\n          error: action.payload\n        }\n      };\n\n    case BEGIN_LOGIN_REQUEST:\n      return { ...state,\n        userSignin: { ...state.userSignin,\n          loading: true\n        }\n      };\n\n    case SUCCESS_LOGIN_REQUEST:\n      return { ...state,\n        userSignin: { ...state.userSignin,\n          loading: false,\n          userInfo: action.payload,\n          error: \"\"\n        }\n      };\n\n    case FAIL_LOGIN_REQUEST:\n      return { ...state,\n        userSignin: { ...state.userSignin,\n          loading: false,\n          userInfo: null,\n          error: action.payload\n        }\n      };\n\n    case BEGIN_UPDATE_USERINFO:\n      return { ...state,\n        userSignin: { ...state.userSignin,\n          loading: true\n        }\n      };\n\n    case SUCCESS_UPDATE_USERINFO:\n      return { ...state,\n        userSignin: { ...state.userSignin,\n          loading: false,\n          userInfo: action.payload,\n          error: \"\"\n        }\n      };\n\n    case FAIL_UPDATE_USERINFO:\n      return { ...state,\n        userSignin: { ...state.userSignin,\n          loading: false,\n          error: action.payload\n        }\n      };\n\n    case LOGOUT_REQUEST:\n      cartItems = [];\n      return { ...state,\n        userSignin: { ...state.userSignin,\n          userInfo: null\n        }\n      };\n\n    case REMEMBER_LOGIN:\n      return { ...state,\n        userSignin: { ...state.userSignin,\n          remember: action.payload\n        }\n      };\n\n    case BEGIN_REGISTER_REQUEST:\n      return { ...state,\n        userRegister: { ...state.userRegister,\n          loading: true\n        }\n      };\n\n    case SUCCESS_REGISTER_REQUEST:\n      return { ...state,\n        userRegister: { ...state.userRegister,\n          loading: false,\n          userInfo: action.payload,\n          error: \"\"\n        },\n        userSignin: { ...state.userSignin,\n          userInfo: action.payload\n        }\n      };\n\n    case FAIL_REGISTER_REQUEST:\n      return { ...state,\n        userRegister: { ...state.userRegister,\n          loading: false,\n          userInfo: null,\n          error: action.payload\n        }\n      };\n\n    case BEGIN_ORDER_CREATE:\n      return { ...state,\n        orderInfo: { ...state.orderInfo,\n          loading: true,\n          success: false\n        }\n      };\n\n    case SUCCESS_ORDER_CREATE:\n      return { ...state,\n        orderInfo: { ...state.orderInfo,\n          loading: false,\n          order: action.payload,\n          success: true,\n          error: null\n        }\n      };\n\n    case FAIL_ORDER_CREATE:\n      return { ...state,\n        orderInfo: { ...state.orderInfo,\n          loading: false,\n          order: {\n            id: \"\"\n          },\n          success: false,\n          error: action.payload\n        }\n      };\n\n    case RESET_ORDER:\n      return { ...state,\n        orderInfo: { ...state.orderInfo,\n          loading: false,\n          order: {\n            id: \"\"\n          },\n          success: false\n        }\n      };\n\n    case BEGIN_ORDER_DETAIL:\n      return { ...state,\n        orderDetail: { ...state.orderDetail,\n          loading: true\n        }\n      };\n\n    case SUCCESS_ORDER_DETAIL:\n      return { ...state,\n        orderDetail: { ...state.orderDetail,\n          loading: false,\n          order: action.payload\n        }\n      };\n\n    case FAIL_ORDER_DETAIL:\n      return { ...state,\n        orderDetail: { ...state.orderDetail,\n          loading: false,\n          error: action.payload\n        }\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport function StoreProvider(props) {\n  _s();\n\n  const [state, dispatch] = useReducerWithThunk(reducer, initialState, \"example\"); // const [state, dispatch] = useReducer(reducer, initialState)\n\n  const value = {\n    state,\n    dispatch\n  };\n  return /*#__PURE__*/_jsxDEV(StoreContext.Provider, {\n    value: value,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 381,\n    columnNumber: 5\n  }, this);\n}\n\n_s(StoreProvider, \"P0eKCI6WtpOvzqf1JEHAprAawWs=\", false, function () {\n  return [useReducerWithThunk];\n});\n\n_c = StoreProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreProvider\");","map":{"version":3,"sources":["F:/NTUE/109-2/進階前端/作業/wk12/src/store/index.js"],"names":["createContext","useReducerWithThunk","SET_PAGE_TITLE","SET_PAGE_CONTENT","SET_NAVBAR_ACTIVEITEM","ADD_CART_ITEM","REMOVE_CART_ITEM","EMPTY_CART","SAVE_SHIPPING_ADDRESS","SAVE_PAYMENT_METHOD","SET_PRODUCT_DETAIL","BEGIN_PRODUCTS_FEED","SUCCESS_PRODUCTS_FEED","FAIL_PRODUCTS_FEED","BEGIN_PRODUCTS_REQUEST","SUCCESS_PRODUCTS_REQUEST","FAIL_PRODUCTS_REQUEST","BEGIN_LOGIN_REQUEST","SUCCESS_LOGIN_REQUEST","FAIL_LOGIN_REQUEST","LOGOUT_REQUEST","REMEMBER_LOGIN","BEGIN_REGISTER_REQUEST","SUCCESS_REGISTER_REQUEST","FAIL_REGISTER_REQUEST","BEGIN_UPDATE_USERINFO","SUCCESS_UPDATE_USERINFO","FAIL_UPDATE_USERINFO","BEGIN_ORDER_CREATE","SUCCESS_ORDER_CREATE","FAIL_ORDER_CREATE","RESET_ORDER","BEGIN_ORDER_DETAIL","SUCCESS_ORDER_DETAIL","FAIL_ORDER_DETAIL","StoreContext","cartItems","JSON","parse","localStorage","getItem","e","shippingAddress","userInfo","orderInfo_order","id","initialState","allProducts","page","title","products","productDetail","product","qty","navBar","activeItem","cart","paymentMethod","orderInfo","loading","order","success","error","orderDetail","feedProducts","requestProducts","userSignin","remember","userRegister","reducer","state","action","type","payload","item","find","x","map","filter","console","log","StoreProvider","props","dispatch","value","children"],"mappings":"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","sourcesContent":["import { createContext } from \"react\";\r\nimport useReducerWithThunk from \"use-reducer-thunk\";\r\nimport {\r\n  SET_PAGE_TITLE,\r\n  SET_PAGE_CONTENT,\r\n  SET_NAVBAR_ACTIVEITEM,\r\n  ADD_CART_ITEM,\r\n  REMOVE_CART_ITEM,\r\n  EMPTY_CART,\r\n  SAVE_SHIPPING_ADDRESS,\r\n  SAVE_PAYMENT_METHOD,\r\n  SET_PRODUCT_DETAIL,\r\n  BEGIN_PRODUCTS_FEED,\r\n  SUCCESS_PRODUCTS_FEED,\r\n  FAIL_PRODUCTS_FEED,\r\n  BEGIN_PRODUCTS_REQUEST,\r\n  SUCCESS_PRODUCTS_REQUEST,\r\n  FAIL_PRODUCTS_REQUEST,\r\n  BEGIN_LOGIN_REQUEST,\r\n  SUCCESS_LOGIN_REQUEST,\r\n  FAIL_LOGIN_REQUEST,\r\n  LOGOUT_REQUEST,\r\n  REMEMBER_LOGIN,\r\n  BEGIN_REGISTER_REQUEST,\r\n  SUCCESS_REGISTER_REQUEST,\r\n  FAIL_REGISTER_REQUEST,\r\n  BEGIN_UPDATE_USERINFO,\r\n  SUCCESS_UPDATE_USERINFO,\r\n  FAIL_UPDATE_USERINFO,\r\n  BEGIN_ORDER_CREATE,\r\n  SUCCESS_ORDER_CREATE,\r\n  FAIL_ORDER_CREATE,\r\n  RESET_ORDER,\r\n  BEGIN_ORDER_DETAIL,\r\n  SUCCESS_ORDER_DETAIL,\r\n  FAIL_ORDER_DETAIL,\r\n} from \"../utils/constants\";\r\n\r\nexport const StoreContext = createContext();\r\nlet cartItems;\r\ntry{\r\n  cartItems = JSON.parse(localStorage.getItem(\"cartItems\"));\r\n  if (!cartItems) cartItems = [];\r\n} catch(e) {\r\n  cartItems = [];\r\n}\r\n\r\nlet shippingAddress;\r\ntry {\r\n  shippingAddress = JSON.parse(localStorage.getItem('shippingAddress'));\r\n} catch(e) {\r\n  shippingAddress = {};\r\n}\r\n\r\nlet userInfo;\r\ntry {\r\n  userInfo =  JSON.parse(localStorage.getItem(\"userInfo\"));\r\n} catch(e) {\r\n  userInfo = null;\r\n}\r\n\r\nlet orderInfo_order;\r\ntry {\r\n  orderInfo_order = JSON.parse(localStorage.getItem('orderInfo'));\r\n} catch(e) {\r\n  orderInfo_order = { id: \"\" };\r\n}\r\n\r\nconst initialState = {\r\n  allProducts: [],\r\n  page: {\r\n    title: \"\",\r\n    products: [],\r\n  },\r\n  productDetail: {\r\n    product: {},\r\n    qty: 1,\r\n  },\r\n  navBar: {\r\n    activeItem: \"/\",\r\n  },\r\n  cart: {\r\n    cartItems,\r\n    shippingAddress,\r\n    paymentMethod: 'Google',\r\n  },\r\n  orderInfo: {\r\n    loading: false,\r\n    order: orderInfo_order,\r\n    success: false,\r\n    error: null,\r\n  },\r\n  orderDetail: {\r\n    loading: true,\r\n    order: { cartItems: []},\r\n    error: null,\r\n  },\r\n  feedProducts: {\r\n    loading: false,\r\n    error: null,\r\n  },\r\n  requestProducts: {\r\n    loading: false,\r\n    error: null,\r\n  },\r\n  userSignin: {\r\n    loading: false,\r\n    userInfo,\r\n    remember: true,\r\n    error: \"\",\r\n  },\r\n  userRegister: {\r\n    loading: false,\r\n    userInfo: null,\r\n    error: \"\",\r\n  },\r\n};\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case SET_PAGE_TITLE:\r\n      return {\r\n        ...state,\r\n        page: {\r\n          ...state.page,\r\n          title: action.payload,\r\n        },\r\n      };\r\n    case SET_PAGE_CONTENT:\r\n      return {\r\n        ...state,\r\n        page: {\r\n          ...state.page,\r\n          ...action.payload,\r\n        },\r\n      };\r\n    case SET_NAVBAR_ACTIVEITEM:\r\n      return {\r\n        ...state,\r\n        navBar: {\r\n          activeItem: action.payload,\r\n        },\r\n      };\r\n    case ADD_CART_ITEM:\r\n      const item = action.payload;\r\n      const product = state.cart.cartItems.find((x) => x.id === item.id);\r\n      if (product) {\r\n        cartItems = state.cart.cartItems.map((x) =>\r\n          x.id === product.id ? item : x\r\n        );\r\n        return { ...state, cart: { ...state.cart, cartItems } };\r\n      }\r\n      cartItems = [...state.cart.cartItems, item];\r\n      return { ...state, cart: { ...state.cart, cartItems } };\r\n    case REMOVE_CART_ITEM:\r\n      cartItems = state.cart.cartItems.filter((x) => x.id !== action.payload);\r\n      return { ...state, cart: { ...state.cart, cartItems } };\r\n    case EMPTY_CART:\r\n      cartItems = [];\r\n      return { ...state, cart: { ...state.cart, cartItems } };\r\n    case SAVE_SHIPPING_ADDRESS:\r\n      console.log('action.payload.shippingAddress = ')\r\n      console.log(action.payload)\r\n      return { ...state, cart: { ...state.cart, shippingAddress: action.payload } };\r\n    case SAVE_PAYMENT_METHOD:\r\n      return { ...state, cart: { ...state.cart, paymentMethod: action.payload } };\r\n    case SET_PRODUCT_DETAIL:\r\n      return {\r\n        ...state,\r\n        productDetail: { ...state.productDetail, ...action.payload },\r\n      };\r\n    case BEGIN_PRODUCTS_REQUEST:\r\n      return {\r\n        ...state,\r\n        requestProducts: { ...state.requestProducts, loading: true },\r\n      };\r\n    case SUCCESS_PRODUCTS_REQUEST:\r\n      return {\r\n        ...state,\r\n        requestProducts: { ...state.requestProducts, loading: false },\r\n      };\r\n    case FAIL_PRODUCTS_REQUEST:\r\n      return {\r\n        ...state,\r\n        requestProducts: {\r\n          ...state.requestProducts,\r\n          loading: false,\r\n          error: action.payload,\r\n        },\r\n      };\r\n    case BEGIN_PRODUCTS_FEED:\r\n      return {\r\n        ...state,\r\n        feedProducts: { ...state.feedProducts, loading: true },\r\n      };\r\n    case SUCCESS_PRODUCTS_FEED:\r\n      return {\r\n        ...state,\r\n        feedProducts: { ...state.feedProducts, loading: false },\r\n      };\r\n    case FAIL_PRODUCTS_FEED:\r\n      return {\r\n        ...state,\r\n        feedProducts: {\r\n          ...state.feedProducts,\r\n          loading: false,\r\n          error: action.payload,\r\n        },\r\n      };\r\n    case BEGIN_LOGIN_REQUEST:\r\n      return { ...state, userSignin: { ...state.userSignin, loading: true } };\r\n    case SUCCESS_LOGIN_REQUEST:\r\n      return {\r\n        ...state,\r\n        userSignin: {\r\n          ...state.userSignin,\r\n          loading: false,\r\n          userInfo: action.payload,\r\n          error: \"\",\r\n        },\r\n      };\r\n    case FAIL_LOGIN_REQUEST:\r\n      return {\r\n        ...state,\r\n        userSignin: {\r\n          ...state.userSignin,\r\n          loading: false,\r\n          userInfo: null,\r\n          error: action.payload,\r\n        },\r\n      };\r\n    case BEGIN_UPDATE_USERINFO:\r\n      return { ...state, userSignin: { ...state.userSignin, loading: true } };\r\n    case SUCCESS_UPDATE_USERINFO:\r\n      return {\r\n        ...state,\r\n        userSignin: {\r\n          ...state.userSignin,\r\n          loading: false,\r\n          userInfo: action.payload,\r\n          error: \"\",\r\n        },\r\n      };\r\n    case FAIL_UPDATE_USERINFO:\r\n      return {\r\n        ...state,\r\n        userSignin: {\r\n          ...state.userSignin,\r\n          loading: false,\r\n          error: action.payload,\r\n        },\r\n      };\r\n    case LOGOUT_REQUEST:\r\n      cartItems = [];\r\n      return {\r\n        ...state,\r\n        userSignin: {\r\n          ...state.userSignin,\r\n          userInfo: null,\r\n        },\r\n      };\r\n    case REMEMBER_LOGIN:\r\n      return {\r\n        ...state,\r\n        userSignin: {\r\n          ...state.userSignin,\r\n          remember: action.payload,\r\n        },\r\n      };\r\n    case BEGIN_REGISTER_REQUEST:\r\n      return {\r\n        ...state,\r\n        userRegister: { ...state.userRegister, loading: true },\r\n      };\r\n    case SUCCESS_REGISTER_REQUEST:\r\n      return {\r\n        ...state,\r\n        userRegister: {\r\n          ...state.userRegister,\r\n          loading: false,\r\n          userInfo: action.payload,\r\n          error: \"\",\r\n        },\r\n        userSignin: {\r\n          ...state.userSignin,\r\n          userInfo: action.payload,\r\n        },\r\n      };\r\n    case FAIL_REGISTER_REQUEST:\r\n      return {\r\n        ...state,\r\n        userRegister: {\r\n          ...state.userRegister,\r\n          loading: false,\r\n          userInfo: null,\r\n          error: action.payload,\r\n        },\r\n      };\r\n    case BEGIN_ORDER_CREATE:\r\n      return {\r\n        ...state,\r\n        orderInfo: {\r\n          ...state.orderInfo,\r\n          loading: true,\r\n          success: false,\r\n        }\r\n      };\r\n    case SUCCESS_ORDER_CREATE:\r\n      return {\r\n        ...state,\r\n        orderInfo: {\r\n          ...state.orderInfo,\r\n          loading: false,\r\n          order: action.payload,\r\n          success: true,\r\n          error: null,\r\n        },\r\n      };\r\n    case FAIL_ORDER_CREATE:\r\n      return {\r\n        ...state,\r\n        orderInfo: {\r\n          ...state.orderInfo,\r\n          loading: false,\r\n          order: { id: \"\" },\r\n          success: false,\r\n          error: action.payload,\r\n        },\r\n      };\r\n    case RESET_ORDER:\r\n      return {\r\n        ...state,\r\n        orderInfo: {\r\n          ...state.orderInfo,\r\n          loading: false,\r\n          order: { id: \"\" },\r\n          success: false,\r\n        },\r\n      };\r\n    case BEGIN_ORDER_DETAIL:\r\n      return {\r\n        ...state,\r\n        orderDetail: {\r\n          ...state.orderDetail,\r\n          loading: true,\r\n        }\r\n      };\r\n    case SUCCESS_ORDER_DETAIL:\r\n      return {\r\n        ...state,\r\n        orderDetail: {\r\n          ...state.orderDetail,\r\n          loading: false,\r\n          order: action.payload,\r\n        },\r\n      };\r\n    case FAIL_ORDER_DETAIL:\r\n      return {\r\n        ...state,\r\n        orderDetail: {\r\n          ...state.orderDetail,\r\n          loading: false,\r\n          error: action.payload,\r\n        },\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function StoreProvider(props) {\r\n  const [state, dispatch] = useReducerWithThunk(\r\n    reducer,\r\n    initialState,\r\n    \"example\"\r\n  );\r\n  // const [state, dispatch] = useReducer(reducer, initialState)\r\n  const value = { state, dispatch };\r\n\r\n  return (\r\n    <StoreContext.Provider value={value}>\r\n      {props.children}\r\n    </StoreContext.Provider>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}